<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>进阶 | Blog</title>
    <meta name="description" content="前端学习笔记">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/blog/favicon.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.82526df8.css" as="style"><link rel="preload" href="/blog/assets/js/app.274fc755.js" as="script"><link rel="preload" href="/blog/assets/js/2.0bdbf684.js" as="script"><link rel="preload" href="/blog/assets/js/15.c382f294.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.69e5de9b.js"><link rel="prefetch" href="/blog/assets/js/11.c922be93.js"><link rel="prefetch" href="/blog/assets/js/12.fbce67ea.js"><link rel="prefetch" href="/blog/assets/js/13.736a80ff.js"><link rel="prefetch" href="/blog/assets/js/14.db892f6e.js"><link rel="prefetch" href="/blog/assets/js/16.deb347aa.js"><link rel="prefetch" href="/blog/assets/js/17.36ce8fa1.js"><link rel="prefetch" href="/blog/assets/js/3.4a67eeb8.js"><link rel="prefetch" href="/blog/assets/js/4.e072c7eb.js"><link rel="prefetch" href="/blog/assets/js/5.3a7c23ac.js"><link rel="prefetch" href="/blog/assets/js/6.968ea830.js"><link rel="prefetch" href="/blog/assets/js/7.7b449097.js"><link rel="prefetch" href="/blog/assets/js/8.d60637e8.js"><link rel="prefetch" href="/blog/assets/js/9.99add044.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.82526df8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/html/" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/blog/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript Menu" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/ES6/" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/blog/network/" class="nav-link">
  网络
</a></div><div class="nav-item"><a href="/blog/jQuery/" class="nav-link">
  jQuery
</a></div><div class="nav-item"><a href="/blog/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="/blog/React/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/interview/basics/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/interview/promotion/" class="nav-link router-link-active">
  进阶
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/html/" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/blog/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript Menu" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/ES6/" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/blog/network/" class="nav-link">
  网络
</a></div><div class="nav-item"><a href="/blog/jQuery/" class="nav-link">
  jQuery
</a></div><div class="nav-item"><a href="/blog/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="/blog/React/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/interview/basics/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/interview/promotion/" class="nav-link router-link-active">
  进阶
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/interview/promotion/111.html#一、javascript" class="sidebar-link">一、JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_1-javascript-的基本类型有几种？" class="sidebar-link">1. JavaScript 的基本类型有几种？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_2-使用-typeof-bar-object-来确定-bar-是否是对象的潜在陷阱是什么？如何避免这个陷阱？" class="sidebar-link">2. 使用 typeof bar === &quot;object&quot; 来确定 bar 是否是对象的潜在陷阱是什么？如何避免这个陷阱？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_3-请写出下面运算结果" class="sidebar-link">3. 请写出下面运算结果</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_4-请描述一下-new-一个对象的过程" class="sidebar-link">4. 请描述一下 new 一个对象的过程</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_5-介绍一下-javascript-原型，原型链，它们有何特点？" class="sidebar-link">5. 介绍一下 JavaScript 原型，原型链，它们有何特点？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_6-javascript-如何实现继承？" class="sidebar-link">6. JavaScript 如何实现继承？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_7-javascript-如何判断函数是-new-调用还是普通调用" class="sidebar-link">7. JavaScript 如何判断函数是 new 调用还是普通调用</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_8-以下代码的结果是什么？请解释你的答案。" class="sidebar-link">8. 以下代码的结果是什么？请解释你的答案。</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_9-以下代码执行结果是什么？" class="sidebar-link">9. 以下代码执行结果是什么？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_10-创建-10-个-a-标签，点击的时候弹出来对应的序号" class="sidebar-link">10. 创建 10 个 a 标签，点击的时候弹出来对应的序号</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_11-请你实现一个深克隆" class="sidebar-link">11. 请你实现一个深克隆</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_12-谈谈你对模块化开发的理解" class="sidebar-link">12. 谈谈你对模块化开发的理解</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_13-请问如何解决在滚动事件中需要做个复杂计算或者实现一个按钮的防连续点击操作？" class="sidebar-link">13. 请问如何解决在滚动事件中需要做个复杂计算或者实现一个按钮的防连续点击操作？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_14-为什么-0-1-0-2-0-3" class="sidebar-link">14. 为什么 0.1 + 0.2 != 0.3</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_15-请验证用户名，用户名规则，以字母开头中间可以是数字下划线-6-20-个字符" class="sidebar-link">15. 请验证用户名，用户名规则，以字母开头中间可以是数字下划线 6-20 个字符</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_16-请模拟实现一个-bind-函数" class="sidebar-link">16. 请模拟实现一个 bind 函数</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_17-es6-中的-promise-有了解吗？可以说一下它是做什么的吗？" class="sidebar-link">17. ES6 中的 promise 有了解吗？可以说一下它是做什么的吗？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_18-红灯三秒亮一次，绿灯两秒亮一次，黄灯一秒亮一次；如何让三个灯不断交替重复亮灯？三个亮灯函数已经存在：" class="sidebar-link">18. 红灯三秒亮一次，绿灯两秒亮一次，黄灯一秒亮一次；如何让三个灯不断交替重复亮灯？三个亮灯函数已经存在：</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_19-数组方法" class="sidebar-link">19. 数组方法</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_20-字符串方法" class="sidebar-link">20. 字符串方法</a></li></ul></li><li><a href="/blog/interview/promotion/111.html#二、网络" class="sidebar-link">二、网络</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_1-你是否了解过-websocket？" class="sidebar-link">1. 你是否了解过 websocket？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_2-请你手写一下-ajax" class="sidebar-link">2. 请你手写一下 ajax</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_3-http-2-0-对于-http-1-x-有哪些优点？" class="sidebar-link">3. http 2.0 对于 http 1.x 有哪些优点？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_4-http-的缺点以及-https" class="sidebar-link">4. HTTP 的缺点以及 HTTPS</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_5-请说一下从输入-url-到页面加载完成的过程" class="sidebar-link">5. 请说一下从输入 URL 到页面加载完成的过程</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_6-描述一下三次握手的过程，三次握手的目的" class="sidebar-link">6. 描述一下三次握手的过程，三次握手的目的</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_7-请描述一下四次挥手的过程" class="sidebar-link">7. 请描述一下四次挥手的过程</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_8-tcp-udp-的区别？什么时候使用-tcp，什么时候用-udp？" class="sidebar-link">8. TCP UDP 的区别？什么时候使用 TCP，什么时候用 UDP？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_9-请说一下-get-和-post-的区别" class="sidebar-link">9. 请说一下 GET 和 POST 的区别</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_10-cookie-有什么作用？它的缺点是什么？" class="sidebar-link">10. cookie 有什么作用？它的缺点是什么？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_11-cookie-的工作原理？" class="sidebar-link">11. Cookie 的工作原理？</a></li></ul></li><li><a href="/blog/interview/promotion/111.html#三、浏览器" class="sidebar-link">三、浏览器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_1-js-事件应该很多清楚吧、那-js-事件流了解吗？" class="sidebar-link">1. js 事件应该很多清楚吧、那 js 事件流了解吗？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_2-事件绑定方法有哪些？" class="sidebar-link">2. 事件绑定方法有哪些？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_3-有哪些跨域的解决方案？" class="sidebar-link">3. 有哪些跨域的解决方案？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_4-settimeout-function-0-先执行括号里面的函数还是先执行外部代码？" class="sidebar-link">4. setTimeout(function(){}, 0) 先执行括号里面的函数还是先执行外部代码？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_5-比如做个新闻编辑上传功能，有网络的情况下直接提交，没有网络的情况下可以离线保存。如何实现这个功能？" class="sidebar-link">5. 比如做个新闻编辑上传功能，有网络的情况下直接提交，没有网络的情况下可以离线保存。如何实现这个功能？</a></li></ul></li><li><a href="/blog/interview/promotion/111.html#四、前端框架" class="sidebar-link">四、前端框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_1-请简述一下-mvvm-框架是什么？它和-jquery-的区别是什么？" class="sidebar-link">1. 请简述一下 MVVM 框架是什么？它和 jQuery 的区别是什么？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_2-你了解前端路由是如何实现的吗？" class="sidebar-link">2. 你了解前端路由是如何实现的吗？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_3-什么是虚拟-dom，解决了什么问题？" class="sidebar-link">3. 什么是虚拟 DOM，解决了什么问题？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_4-请详细说下你对-vue-生命周期的理解？" class="sidebar-link">4. 请详细说下你对 vue 生命周期的理解？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_5-聊聊你对-vue-js-的-template-编译的理解？" class="sidebar-link">5. 聊聊你对 Vue.js 的 template 编译的理解？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_6-vue-组件-data-为什么必须是函数？" class="sidebar-link">6. Vue 组件 data 为什么必须是函数？</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_7-route-和-router-的区别" class="sidebar-link">7. \$route 和 $router 的区别</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_8-描述一下-react-生命周期" class="sidebar-link">8. 描述一下 React 生命周期</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_9-当组件的-setstate-函数被调用之后，发生了什么？" class="sidebar-link">9. 当组件的 setState 函数被调用之后，发生了什么？</a></li></ul></li><li><a href="/blog/interview/promotion/111.html#五、性能" class="sidebar-link">五、性能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_1-js-相关" class="sidebar-link">1. JS 相关</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_2-渲染相关" class="sidebar-link">2. 渲染相关</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_3-文件优化" class="sidebar-link">3. 文件优化</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_4-网络相关" class="sidebar-link">4. 网络相关</a></li><li class="sidebar-sub-header"><a href="/blog/interview/promotion/111.html#_5-构建工具" class="sidebar-link">5. 构建工具</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="进阶"><a href="#进阶" class="header-anchor">#</a> 进阶</h1> <h2 id="一、javascript"><a href="#一、javascript" class="header-anchor">#</a> 一、JavaScript</h2> <h3 id="_1-javascript-的基本类型有几种？"><a href="#_1-javascript-的基本类型有几种？" class="header-anchor">#</a> 1. JavaScript 的基本类型有几种？</h3> <p>JavaScript 中分为七种内置类型，七种内置类型又分为两大类型：基本类型和对象（Object）</p> <p>基本类型有六种：null，undefined，Boolean，Number，String，Symbol</p> <h3 id="_2-使用-typeof-bar-object-来确定-bar-是否是对象的潜在陷阱是什么？如何避免这个陷阱？"><a href="#_2-使用-typeof-bar-object-来确定-bar-是否是对象的潜在陷阱是什么？如何避免这个陷阱？" class="header-anchor">#</a> 2. 使用 typeof bar === &quot;object&quot; 来确定 bar 是否是对象的潜在陷阱是什么？如何避免这个陷阱？</h3> <p>尽管 typeof bar === &quot;object&quot; 是检查 bar 是否是对象的可靠方法，但在 JavaScript 中 null 也被认为是对象！所以可以用以下方法进行判断：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span>bar <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> bar <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>如果 bar 是一个函数，也会得到 false，所以我们改进一下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span>bar <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> bar <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> bar <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>如果 bar 是数组的话会得到 true，但我们大多数情况希望数组判断为 false，所以最终的代码为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span>bar <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> bar <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;[object Array]&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_3-请写出下面运算结果"><a href="#_3-请写出下面运算结果" class="header-anchor">#</a> 3. 请写出下面运算结果</h3> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>			<span class="token comment">// &quot;&quot;(空字符串)</span>
  <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>			<span class="token comment">// &quot;[object Object]&quot;</span>
  <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>			<span class="token comment">// 0</span>
  <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> 		    <span class="token comment">// &quot;[object Object][object Object]&quot; (firefox下是NaN)</span>
  <span class="token boolean">true</span> <span class="token operator">+</span> <span class="token boolean">true</span> 	    <span class="token comment">// 2</span>
  <span class="token number">1</span> <span class="token operator">+</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span>		<span class="token comment">// &quot;1[object Object]&quot;</span>
</code></pre></div><h3 id="_4-请描述一下-new-一个对象的过程"><a href="#_4-请描述一下-new-一个对象的过程" class="header-anchor">#</a> 4. 请描述一下 new 一个对象的过程</h3> <p>新生成了一个对象 ==&gt; 链接到原型 ==&gt; 绑定this ==&gt; 返回新对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 代码实现</span>
<span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>								<span class="token comment">// 创建一个空的对象</span>
    <span class="token keyword">let</span> Con <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>					 <span class="token comment">// 获得构造函数</span>
    obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Con</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>						<span class="token comment">// 链接到原型</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">Con</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>				 <span class="token comment">// 绑定 this，执行构造函数</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> result <span class="token operator">:</span> obj<span class="token punctuation">;</span>	  <span class="token comment">// 确保 new 出来的是个对象</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_5-介绍一下-javascript-原型，原型链，它们有何特点？"><a href="#_5-介绍一下-javascript-原型，原型链，它们有何特点？" class="header-anchor">#</a> 5. 介绍一下 JavaScript 原型，原型链，它们有何特点？</h3> <p>每个对象都会在其内部初始化一个属性，就是 prototype(原型)，当我们访问一个对象的属性时，如果这个对象内部不存在这个属性，那么它就会去 prototype 里找这个属性，这个 prototype 又会有自己的 prototype，于是就这样一直找下去，也就是我们平时所说的原型链的概念。</p> <p>特点：JavaScript 对象是通过引用来传递的，我们创建的每个新对象实体中并没有一份属于自己的原型副本，当我们修改原型时，与之相关的对象也会继承这一改变。</p> <h3 id="_6-javascript-如何实现继承？"><a href="#_6-javascript-如何实现继承？" class="header-anchor">#</a> 6. JavaScript 如何实现继承？</h3> <p>既然要实现继承，那么首先我们得有一个父类，代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义一个动物类</span>
<span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 属性</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">'Animal'</span><span class="token punctuation">;</span>
    <span class="token comment">// 实例方法</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'正在睡觉!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 原型方法</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'正在吃：'</span> <span class="token operator">+</span> food<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>原型链继承</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'cat'</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>构造继承</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">'Tom'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>实例继承</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    instance<span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">'Tom'</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>拷贝继承</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token keyword">in</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> animal<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">'Tom'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-javascript-如何判断函数是-new-调用还是普通调用"><a href="#_7-javascript-如何判断函数是-new-调用还是普通调用" class="header-anchor">#</a> 7. JavaScript 如何判断函数是 new 调用还是普通调用</h3> <p>第一种方式：通过 instanceof 判断</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">arguments<span class="token punctuation">.</span>callee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'new 调用'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'普通调用'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// new 调用</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">// 普通调用</span>
</code></pre></div><p>第二种方式：通过constructor</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'new 调用'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'普通调用'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// new 调用</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">// 普通调用</span>
</code></pre></div><h3 id="_8-以下代码的结果是什么？请解释你的答案。"><a href="#_8-以下代码的结果是什么？请解释你的答案。" class="header-anchor">#</a> 8. 以下代码的结果是什么？请解释你的答案。</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fullname <span class="token operator">=</span> <span class="token string">'John Doe'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    fullname<span class="token operator">:</span> <span class="token string">'Colin Ihrig'</span><span class="token punctuation">,</span>
    prop<span class="token operator">:</span> <span class="token punctuation">{</span>
        fullname<span class="token operator">:</span> <span class="token string">'Aurelio De Rosa'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">getFullname</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fullname<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>prop<span class="token punctuation">.</span><span class="token function">getFullname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> test <span class="token operator">=</span> obj<span class="token punctuation">.</span>prop<span class="token punctuation">.</span>getFullname<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 结果是 Aurelio De Rosa 和 John Doe</span>
<span class="token comment">// 原因是 JavaScript中关键字this所引用的是函数上下文，取决于函数是如何调用的，而不是怎么被定义的。</span>
</code></pre></div><h3 id="_9-以下代码执行结果是什么？"><a href="#_9-以下代码执行结果是什么？" class="header-anchor">#</a> 9. 以下代码执行结果是什么？</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>第一次弹出a函数源代码</p> <p>第二次弹出a函数源代码</p> <p>第三次弹出1</p> <p>第四次弹出3</p> <p>第五次报错</p> <h3 id="_10-创建-10-个-a-标签，点击的时候弹出来对应的序号"><a href="#_10-创建-10-个-a-标签，点击的时候弹出来对应的序号" class="header-anchor">#</a> 10. 创建 10 个 a 标签，点击的时候弹出来对应的序号</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">'&lt;br&gt;'</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取消默认事件，指a标签</span>
            <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_11-请你实现一个深克隆"><a href="#_11-请你实现一个深克隆" class="header-anchor">#</a> 11. 请你实现一个深克隆</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">deepCopy</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> newObj <span class="token operator">=</span> obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_12-谈谈你对模块化开发的理解"><a href="#_12-谈谈你对模块化开发的理解" class="header-anchor">#</a> 12. 谈谈你对模块化开发的理解</h3> <p>所谓的模块化开发就是封装细节，提供使用接口，彼此之间互不影响，每个模块都是实现某一特定的功能。模块化开发的基础就是函数。</p> <p>模块化的实现 nodejs 中的 module.exports 与 require</p> <p>require.js 中的 AMD 规范</p> <p>sea.js 中的 CMD 规范</p> <p>es6 中的 export 与 import</p> <h3 id="_13-请问如何解决在滚动事件中需要做个复杂计算或者实现一个按钮的防连续点击操作？"><a href="#_13-请问如何解决在滚动事件中需要做个复杂计算或者实现一个按钮的防连续点击操作？" class="header-anchor">#</a> 13. 请问如何解决在滚动事件中需要做个复杂计算或者实现一个按钮的防连续点击操作？</h3> <p>使用防抖或者节流来实现</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 防抖</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait<span class="token punctuation">,</span> immediate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timeout<span class="token punctuation">,</span> result<span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">debounced</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timeout<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 如果已经执行过，不再执行</span>
            <span class="token keyword">var</span> callNow <span class="token operator">=</span> <span class="token operator">!</span>timeout<span class="token punctuation">;</span>
            timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>callNow<span class="token punctuation">)</span> result <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    debounced<span class="token punctuation">.</span><span class="token function-variable function">cancel</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> debounced<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timeout<span class="token punctuation">,</span> context<span class="token punctuation">,</span> args<span class="token punctuation">,</span> result<span class="token punctuation">;</span>
    <span class="token keyword">var</span> previous <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">)</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">later</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        previous <span class="token operator">=</span> options<span class="token punctuation">.</span>leading <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timeout<span class="token punctuation">)</span> context <span class="token operator">=</span> args <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">throttled</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>previous <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>leading <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> previous <span class="token operator">=</span> now<span class="token punctuation">;</span>
        <span class="token keyword">var</span> remaining <span class="token operator">=</span> wait <span class="token operator">-</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> previous<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>remaining <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> remaining <span class="token operator">&gt;</span> wait<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>timeout<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
                timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            previous <span class="token operator">=</span> now<span class="token punctuation">;</span>
            <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timeout<span class="token punctuation">)</span> context <span class="token operator">=</span> args <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timeout <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>trailing <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>later<span class="token punctuation">,</span> remaining<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> throttled<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_14-为什么-0-1-0-2-0-3"><a href="#_14-为什么-0-1-0-2-0-3" class="header-anchor">#</a> 14. 为什么 0.1 + 0.2 != 0.3</h3> <p>因为 JS 采用 IEEE 754 双精度版本（64位），并且只要采用 IEEE 754 的语言都有该问题，我们都知道在计算机中都是以二进制来存储的，0.1 和 0.2 的二进制是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// (0011) 表示循环</span>
<span class="token number">0.1</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">^</span><span class="token operator">-</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1.10011</span><span class="token punctuation">(</span><span class="token number">0011</span><span class="token punctuation">)</span>
<span class="token number">0.2</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">^</span><span class="token operator">-</span><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">1.10011</span><span class="token punctuation">(</span><span class="token number">0011</span><span class="token punctuation">)</span>
</code></pre></div><p>由于刚才我们说了 JS 采用 IEEE 754 双精度，用 64 位代表一个数，64 位中符号位占 1 位，整数占 11 位，其余 52 位都为小数位。因为 0.1 和 0.2 都是无限循环的二进制，所以在小数位末尾处需要判断是否进位（就和十进制的四舍五入一样）。</p> <p>所以 2^-4 * 1.10011...001 进位后就变成了 2^-4 * 1.10011(0011 * 12次)010 。那么把这两个二进制加起来会得出2^-2 * 1.10011(0011 * 11次)0011 ，这个值算成十进制是 0.30000000000000004，0.30000000000000004 当然不等于 0.3。</p> <h3 id="_15-请验证用户名，用户名规则，以字母开头中间可以是数字下划线-6-20-个字符"><a href="#_15-请验证用户名，用户名规则，以字母开头中间可以是数字下划线-6-20-个字符" class="header-anchor">#</a> 15. 请验证用户名，用户名规则，以字母开头中间可以是数字下划线 6-20 个字符</h3> <p>使用正则表达式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token regex">/^[a-zA-Z][a-zA-Z0-9_]{5,19}$/</span>
</code></pre></div><h3 id="_16-请模拟实现一个-bind-函数"><a href="#_16-请模拟实现一个-bind-函数" class="header-anchor">#</a> 16. 请模拟实现一个 bind 函数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回一个函数</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 因为返回了一个函数，我们可以 new F()，所以需要判断</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">F</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">_this</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">_this</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_17-es6-中的-promise-有了解吗？可以说一下它是做什么的吗？"><a href="#_17-es6-中的-promise-有了解吗？可以说一下它是做什么的吗？" class="header-anchor">#</a> 17. ES6 中的 promise 有了解吗？可以说一下它是做什么的吗？</h3> <p>Promise 是 ES6 新增的语法，解决了回调地域的问题。</p> <p>可以把 Promise 看成一个状态机。初始是 pending 状态，可以通过函数 resolve 和 reject，将状态转变为resolved 或者 rejected 状态，状态一旦改变就不能再次变化。then 函数会返回一个 Promise 实例，并且该返回值是一个新的实例而不是之前的实例。因为 Promise 规范规定除了 pending 状态，其他状态是不可以改变的，如果返回的是一个相同的实例的话，多个 then 调用就失去意义了。</p> <h3 id="_18-红灯三秒亮一次，绿灯两秒亮一次，黄灯一秒亮一次；如何让三个灯不断交替重复亮灯？三个亮灯函数已经存在："><a href="#_18-红灯三秒亮一次，绿灯两秒亮一次，黄灯一秒亮一次；如何让三个灯不断交替重复亮灯？三个亮灯函数已经存在：" class="header-anchor">#</a> 18. 红灯三秒亮一次，绿灯两秒亮一次，黄灯一秒亮一次；如何让三个灯不断交替重复亮灯？三个亮灯函数已经存在：</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">red</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'red   - '</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">green</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'green  - '</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">yellow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yellow - '</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>主要考察多种回调函数写法</p> <ol><li>callback 实现</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">red</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">green</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token function">yellow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>Promise 实现</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">tic</span><span class="token punctuation">(</span><span class="token parameter">timer<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> timer<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">tic</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> red<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">tic</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> green<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">tic</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> yellow<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>Generator 实现</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">light</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token function">tic</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> red<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> <span class="token function">tic</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> green<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> <span class="token function">tic</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> yellow<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token parameter">iterator<span class="token punctuation">,</span> gen</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">loop</span><span class="token punctuation">(</span><span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> gen<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">loop</span><span class="token punctuation">(</span>iterator<span class="token punctuation">,</span> gen<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">loop</span><span class="token punctuation">(</span><span class="token function">light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> light<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>async, await 实现</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">tic</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> red<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token function">tic</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> green<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token function">tic</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> yellow<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_19-数组方法"><a href="#_19-数组方法" class="header-anchor">#</a> 19. 数组方法</h3> <ol><li><code>push()</code> 将一个或多个元素添加到数组的末尾，并返回该数组的新长度</li> <li><code>pop()</code> 从数组中删除最后一个元素，并返回该元素的值</li> <li><code>unshift()</code> 将一个或多个元素添加到数组的开头，并返回该数组的新长度</li> <li><code>shift()</code> 从数组中删除第一个元素，并返回该元素的值</li> <li><code>concat()</code> 合并两个或多个数组，不会更改现有数组，而是返回一个新数组</li> <li><code>slice()</code> 截取数组中一段元素生成一个新数组</li> <li><code>splice()</code> 通过删除或替换现有元素或者原地添加新的元素来修改数组，并以数组形式返回被修改的内容</li> <li><code>reverse()</code> 将数组中元素的位置颠倒，并返回该数组</li> <li><code>sort()</code> 对数组的元素进行排序，并返回数组。默认排序顺序是将元素转换成字符串进行升序排列</li> <li><code>indexOf()</code> 返回指定元素在数组中的第一个索引，如果不存在，则返回-1</li> <li><code>lastIndexOf()</code> 返回指定元素在数组中的最后一个索引，如果不存在，则返回-1</li> <li><code>forEach()</code> 对数组中的每一项运行给定函数，这个方法没有返回值</li> <li><code>map()</code> 对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组</li> <li><code>every()</code> 对数组中的每一项运行给定函数，如果该函数对每一项都返回 true，则返回 true</li> <li><code>filter()</code> 对数组中的每一项运行给定函数，返回该函数会返回 true 的项组成的数组</li> <li><code>some()</code> 对数组中的每一项运行给定函数，如果该函数对任一项返回 true，则返回 true</li> <li><code>reduce()</code> 从数组的第一项开始迭代数组的所有项，然后构建一个最终的返回值</li> <li><code>reduceRight()</code> 从数组的最后一项开始迭代数组的所有项，然后构建一个最终的返回值</li> <li><code>join()</code> 将一个数组（或一个类数组对象）的所有元素连接成一个字符串并返回这个字符串，如果数组只有一个项目，那么将返回该项目而不使用分隔符</li> <li><code>find()</code> 返回数组中满足提供的测试函数的第一个元素的值。否则返回 undefined</li> <li><code>findIndex()</code> 返回数组中满足提供的测试函数的第一个元素的索引。否则返回 -1</li> <li><code>includes()</code> 用来判断一个数组是否包含一个指定的值，包含则返回 true，否则返回 false</li></ol> <h3 id="_20-字符串方法"><a href="#_20-字符串方法" class="header-anchor">#</a> 20. 字符串方法</h3> <ol><li><code>concat()</code> 将一个或多个字符串与原字符串连接合并，形成一个新的字符串并返回</li> <li><code>includes()</code> 判断一个字符串是否包含在另一个字符串中，是返回 true 否则返回 false</li> <li><code>indexOf()</code> 从一个字符串的开头向后搜索给定的子字符串，返回子字符串的第一个索引（如果没有找到返回 -1）</li> <li><code>lastIndexOf()</code> 从一个字符串的末尾向前搜索给定的子字符串，返回子字符串的最后一个索引（如果没有返回 -1）</li> <li><code>slice()</code> 提取某个字符串的一部分，并返回一个新的字符串，且不会改变原字符串</li> <li><code>split()</code> 使用指定的分隔符字符串将一个 String 对象分割成字符串数组</li> <li><code>replace()</code> 返回一个由替换值替换一些或所有匹配的模式后的新字符串</li> <li><code>trim()</code> 从一个字符串的两端删除空白字符</li></ol> <h2 id="二、网络"><a href="#二、网络" class="header-anchor">#</a> 二、网络</h2> <h3 id="_1-你是否了解过-websocket？"><a href="#_1-你是否了解过-websocket？" class="header-anchor">#</a> 1. 你是否了解过 websocket？</h3> <p>webSocket 和 http 一样，同属于应用层协议。它最重要的用途是实现了客户端与服务器端之间的全双工通信，当服务器端数据变化时，可以第一时间通知到客户端。</p> <p>除此之外，它与 http 协议不同的地方还有：</p> <ul><li>http 只能由客户端发起，而 webSocket 是双向的。</li> <li>webSocket 传输的数据包相对于 http 而言很小，很适合移动端使用</li> <li>没有同源限制，可以跨域共享资源</li></ul> <h3 id="_2-请你手写一下-ajax"><a href="#_2-请你手写一下-ajax" class="header-anchor">#</a> 2. 请你手写一下 ajax</h3> <p>实现流程：</p> <ol><li>创建 XMLHttpRequest 对象，也就是创建一个异步调用对象。</li> <li>创建一个新的 HTTP 请求，并指向该 HTTP 请求的方法、URL 及验证信息。</li> <li>设置响应 HTTP 请求状态变化的函数。</li> <li>发送 HTTP 请求。</li> <li>获取异步调用返回的数据。</li> <li>使用 JavaScript 和 DOM 实现局部刷新。</li></ol> <p>代码实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> url <span class="token operator">=</span> options<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
    <span class="token keyword">const</span> method <span class="token operator">=</span> options<span class="token punctuation">.</span>method<span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'get'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> async <span class="token operator">=</span> options<span class="token punctuation">.</span>async <span class="token operator">!=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// default is true</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> options<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>timeout <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>timeout <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> options<span class="token punctuation">.</span>timeout<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> reject <span class="token operator">&amp;&amp;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'请求超时'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">304</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    resolve <span class="token operator">&amp;&amp;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    reject <span class="token operator">&amp;&amp;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> reject <span class="token operator">&amp;&amp;</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">let</span> paramArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> encodeData<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 参数拼接需要通过 encodeURIComponent 进行编码</span>
                paramArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'='</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            encodeData <span class="token operator">=</span> paramArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">'get'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 检测 url 中是否已存在 ？及其位置</span>
            <span class="token keyword">const</span> index <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> url <span class="token operator">+=</span> <span class="token string">'?'</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> url<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> url <span class="token operator">+=</span> <span class="token string">'&amp;'</span><span class="token punctuation">;</span>
            <span class="token comment">// 拼接 url</span>
            url <span class="token operator">+=</span> encodeData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> async<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">'get'</span><span class="token punctuation">)</span> xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// post 方式需要设置请求头</span>
            xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded;charset=UTF-8'</span><span class="token punctuation">)</span>
            xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>encodeData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-http-2-0-对于-http-1-x-有哪些优点？"><a href="#_3-http-2-0-对于-http-1-x-有哪些优点？" class="header-anchor">#</a> 3. http 2.0 对于 http 1.x 有哪些优点？</h3> <ul><li>多路复用：多路复用允许同时通过单一的 HTTP/2 连接发起多重的请求-响应消息。由于 http 1.x 的时代中，浏览器向同一域名下发送的 http 请求数量是受限的，当超出数量限制时，请求会被阻塞，大大降低了用户体验。而 HTTP/2 的多路复用允许同时通过单一的 HTTP/2 连接发起多重的请求-响应消息。</li> <li>二进制分帧：HTTP/2 在应用层和传输层之间追加了一个二进制分帧层，最终使得多个数据流共用一个连接，更加高效的使用 tcp 连接。从而使得服务器的连接压力减轻，降低了内存的消耗，增大了网络的吞吐量。</li> <li>首部压缩：HTTP/2 引入了 HPACK 算法对头部进行压缩，大大减小了数据发送的字节数。</li></ul> <h3 id="_4-http-的缺点以及-https"><a href="#_4-http-的缺点以及-https" class="header-anchor">#</a> 4. HTTP 的缺点以及 HTTPS</h3> <p>缺点：</p> <ul><li>通信使用明文不加密，内容可能被窃听。</li> <li>不验证通信方身份，可能遭到伪装。</li> <li>无法验证报文完整性，可能被篡改。</li></ul> <p>HTTPS 就是 HTTP 加上 SSL 加密处理（一般是 SSL 安全通信线路）+ 认证 + 完整性保护</p> <p>客户端浏览器在使用 HTTPS 方式与 Web 服务器通信时有以下几个步骤：</p> <ol><li>客户使用 https 的 URL 访问 Web 服务器，要求与 Web 服务器建立 SSL 连接。</li> <li>Web 服务器收到客户端请求后，会生成一对公钥和私钥，并把公钥放在证书中发给客户端浏览器。</li> <li>客户端浏览器根据双方同意的 SSL 连接的安全等级，建立会话密钥，然后用公钥将会话密钥加密，并传送给服务器。</li> <li>Web 服务器用自己的私钥解密出会话密钥。</li> <li>Web 服务器利用会话密钥加密与客户端之间的通信。</li></ol> <h3 id="_5-请说一下从输入-url-到页面加载完成的过程"><a href="#_5-请说一下从输入-url-到页面加载完成的过程" class="header-anchor">#</a> 5. 请说一下从输入 URL 到页面加载完成的过程</h3> <ol><li>首先做 DNS 查询，如果这一步做了智能 DNS 解析的话，会提供访问速度最快的 IP 地址回来。</li> <li>接下来是 TCP 握手，应用层会下发数据给传输层，这里 TCP 协议会指明两端的端口号，然后下发给网络层。网络层中的 IP 协议会确定 IP 地址，并且指示了数据传输中如何跳转路由器。然后包会再被封装到数据链路层的数据帧结构中，最后就是物理层面的传输了。</li> <li>TCP 握手结束后会进行 TLS 握手，然后就开始正式的传输数据。</li> <li>数据在进入服务端之前，可能还会先经过负责负载均衡的服务器，它的作用就是将请求合理的分发到多台服务器上，这时假设服务器端会响应一个 HTML 文件。</li> <li>首先浏览器会判断状态码是什么，如果是 200 那就继续解析，如果是 400 或 500 就会报错，如果是 300 会进行重定向，这里会有个重定向计时器，避免过多次的重定向，超过次数也会报错。</li> <li>浏览器开始解析文件，如果是 gzip 格式的话会先解压，然后通过文件的编码格式知道该如何去解码文件。</li> <li>文件解码成功后会正式开始渲染流程，先会根据 HTML 构建 DOM 树，有 CSS 的话会去构建 CSSOM 树。如果遇到 script 标签的话，会判断是否存在 async 或者 defer，前者会并行进行下载并执行 JS，后者会先下载文件，然后等待 HTML 解析完成后顺序执行，如果以上都没有，就会阻塞住渲染流程直到 JS 执行完毕。遇到文件下载的会去下载文件，这里如果使用 HTTP 2.0 协议的话会极大的提高多图的下载效率。</li> <li>初始的 HTML 被完全加载和解析后会触发 DOMContentLoaded 事件。</li> <li>CSSOM 树 和 DOM 树构建完成后会开始生成 Render 树，这一步就是确定页面元素的布局、样式等等诸多方面的东西。</li> <li>在生成 Render 树的过程中，浏览器就开始调用 GPU 绘制，合成图层，将内容显示在屏幕上了。</li></ol> <h3 id="_6-描述一下三次握手的过程，三次握手的目的"><a href="#_6-描述一下三次握手的过程，三次握手的目的" class="header-anchor">#</a> 6. 描述一下三次握手的过程，三次握手的目的</h3> <p>TCP 是一种面向连接的、可靠的、基于字节流的运输层（Transport layer）通信协议。是专门为了在不可靠的互联网络上提供一个可靠的端到端字节流而设计的。每一次 TCP 连接都需要三个阶段：连接建立、数据传送和连接释放。“三次握手”就发生在连接建立阶段。</p> <ol><li>第一次握手：客户端发送一个 TCP 的 SYN 标志位置 1 的包，指明客户打算连接的服务器的端口，以及初始序号X，保存在包头的序列号（Sequence Number）字段里。</li> <li>第二次握手：服务器发回确认包（ACK）应答。即 SYN 标志位和 ACK 标志位均为 1 同时，将确认序号（Acknowledgement Number）设置为客户的 ISN 加 1 以及 X+1。</li> <li>第三次握手：客户端再次发送确认包（ACK），SYN 标志位为 0，ACK 标志位为 1，并且把服务器发来 ACK 的序号字段 +1，放在确定字段中发送给对方。并且在数据段方写 ISN+1。</li></ol> <p>三次握手的目的：</p> <ul><li>使收发端的数据发送和接收同步</li> <li>协调可以收发的数据量</li> <li>建立虚连接</li></ul> <h3 id="_7-请描述一下四次挥手的过程"><a href="#_7-请描述一下四次挥手的过程" class="header-anchor">#</a> 7. 请描述一下四次挥手的过程</h3> <p>所谓四次挥手（Four-Way Wavehand）即终止 TCP 连接，就是指断开一个 TCP 连接时，需要客户端和服务器端总共发送 4 个包以确认连接的断开。由客户端或服务器端任一方执行 close 来触发。</p> <ol><li>第一次挥手：Client 发送一个 FIN，用来关闭 Client 到 Server 的数据传送，Client 进入 FIN_WAIT_1 状态。</li> <li>第二次挥手：Server 收到 FIN 后，发送一个 ACK 给 Client，确认序号为收到序号 +1（与 SYN 相同，一个 FIN 占用一个序号），Server 进入 CLOSE_WAIT 状态。</li> <li>第三次挥手：Server 发送一个 FIN，用来关闭 Server 到 Client 的数据传送，Server 进入 LAST_ACK 状态。</li> <li>第四次挥手：Client 收到 FIN 后，Client 进入 TIME_WAIT 状态，接着发送一个 ACK 给 Server，确认序号为收到序号 +1，Server 进入 CLOSED 状态，完成四次挥手。</li></ol> <h3 id="_8-tcp-udp-的区别？什么时候使用-tcp，什么时候用-udp？"><a href="#_8-tcp-udp-的区别？什么时候使用-tcp，什么时候用-udp？" class="header-anchor">#</a> 8. TCP UDP 的区别？什么时候使用 TCP，什么时候用 UDP？</h3> <p>它们之间有四方面区别：</p> <ol><li>TCP 是基于连接的，可靠性高；UDP 基于无连接，可靠性较低。</li> <li>由于 TCP 是连接的通信，需要有三次握手、重新确认等连接过程，会有时延，实时性差；同时过程复杂，也使其易于被攻击；而 UDP 无连接，无建立连接的过程，因而实时性较强，也稍安全。</li> <li>在传输相同大小的数据时，TCP 首部开销 20 字节；UDP 的首部开销小，只有 8 个字节，TCP 报头比 UDP 复杂，故实际包含的用户数据较少。TCP 无丢包，而 UDP 有丢包，故 TCP 的开销大，UDP 开销较小。</li> <li>每一条 TCP 连接只能是点到点的；UDP 支持一对一，一对多，多对一和多对多的交互通信。</li></ol> <p>应用方面：</p> <ol><li>由于 TCP 的实时性差，故对实时性要求高和高速传输的场合需用 UDP。</li> <li>TCP 适用于传输大量数据，对可靠性要求高的环境；而在可靠性要求较低，追求效率时可用 UDP。</li></ol> <h3 id="_9-请说一下-get-和-post-的区别"><a href="#_9-请说一下-get-和-post-的区别" class="header-anchor">#</a> 9. 请说一下 GET 和 POST 的区别</h3> <ul><li>从用途来说，GET 和 POST 是 http 请求方式。GET 向特定的资源发出请求。POST 向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。</li> <li>对于数据存放方式而言，要给 GET 加上 request body，给 POST 带上 url 参数，是完全可以的。不同服务器的处理方式也是不同的，有些服务器会读出数据，有些服务器直接忽略，所以，虽然 GET 可以带 request body，但不能保证一定能被接收到。所以采用了 url 的方式。安全不足以作为他们的主要区别，只是因为数据存放位置不同而已。</li> <li>对于数据量来说，数据量太大对浏览器和服务器都是很大负担。业界不成文的规定是，（大多数）浏览器通常都会限制 url 长度在 2K 个字节，而（大多数）服务器最多处理 64K 大小的 url。超过的部分概不处理。所以就有了我们现在知道的数据长度受限的问题。</li> <li>最本质的一点，GET 和 POST 最大的区别主要是 GET 请求是幂等性的。</li></ul> <h3 id="_10-cookie-有什么作用？它的缺点是什么？"><a href="#_10-cookie-有什么作用？它的缺点是什么？" class="header-anchor">#</a> 10. cookie 有什么作用？它的缺点是什么？</h3> <p>cookie 可用解决 HTTP 的无状态的问题，与服务器进行交互，作为 http 规范存在。它具有较高的简便性、可扩展性和可用性，也可以通过加密和 SSL 技术来提高其安全性。因此推荐使用 cookie 作为标识而不是身份验证的工具。</p> <p>缺点有：</p> <ol><li>大小和数目受限制。浏览器对一个域 cookie 的条目数有上限要求，且每个 cookie 的大小不得超过 4kb。</li> <li>存在安全性问题，易被人拦截。</li> <li>需要指定域，不可以跨域。</li> <li>浪费带宽，因为每次请求一个新的页面，cookie 都会被自动发送过去。</li> <li>有的移动端浏览器不支持 cookie 或浏览器禁用 cookie。</li> <li>有些状态不可能保存在客户端。例如：为了防止重复提交表单，我们需要在服务器端保存一个计数器。如果我们把这个计数器保存在客户端，那么它起不到任何作用。</li></ol> <h3 id="_11-cookie-的工作原理？"><a href="#_11-cookie-的工作原理？" class="header-anchor">#</a> 11. Cookie 的工作原理？</h3> <ul><li>用户首次访问 Web 站点时，Web 服务器对用户一无所知。</li> <li>Web 服务器通过 Set-Cookie 首部将 cookie 存放到浏览器中的 cookie 数据库中。cookie 中包含了 N 个键值对，例如 Cookie：id=“1234”。cookie 中可以包含任意信息，但它们通常都只包含一个服务器为了进行跟踪而产生的独特的标识码。</li> <li>将来用户再次访问同一站点，浏览器会从 cookie 数据库中挑中那个服务器设置的 cookie，并在 cookie 请求首部中（Cookie：id=“1234”）将其传回给服务器。</li> <li>服务器可以通过 id=“1234” 这个键值对来查找服务器为其访问积累的信息（购物历史、地址信息等）。</li></ul> <h2 id="三、浏览器"><a href="#三、浏览器" class="header-anchor">#</a> 三、浏览器</h2> <h3 id="_1-js-事件应该很多清楚吧、那-js-事件流了解吗？"><a href="#_1-js-事件应该很多清楚吧、那-js-事件流了解吗？" class="header-anchor">#</a> 1. js 事件应该很多清楚吧、那 js 事件流了解吗？</h3> <ul><li><p><strong>事件流：</strong> 指从页面中接收事件的顺序，有冒泡流和捕获流</p></li> <li><p><strong>事件捕获：</strong> 当鼠标点击或者触发 dom 事件时，浏览器会从根节点开始由外到内进行事件传播。即先触发父元素绑定的事件，再触发子元素绑定的事件。</p> <p>事件冒泡与事件捕获相反，由内而外，先触发子元素绑定的事件，再触发父元素绑定的事件。</p> <p>dom 标准事件流的触发先后顺序为先捕获再冒泡。<code>IE10及以下不支持捕获型事件</code></p> <p>如果给目标节点同时注册冒泡和捕获事件，事件触发会按照注册的顺序执行。</p></li></ul> <h3 id="_2-事件绑定方法有哪些？"><a href="#_2-事件绑定方法有哪些？" class="header-anchor">#</a> 2. 事件绑定方法有哪些？</h3> <ul><li>直接在 html 标签中绑定事件。但代码耦合严重</li> <li>在 DOM 元素上采用<code>on+事件名称</code>的方法绑定
<ul><li>但多个事件处理程序无法同时绑定在一个 DOM 对象上</li> <li>而且动态生成的 DOM 对象无法绑定事件</li> <li>当目标元素过多时，需要一一绑定，繁琐且性能差</li></ul></li> <li>采用 addEventListener 和 attachEvent 函数绑定
<ul><li><code>addEventListener(event, function, boolean)</code>函数是 W3C 标准规定的，IE8 及 IE8 以下不支持；boolean 默认值 false：冒泡阶段；true：捕获阶段</li> <li><code>attachEvent()</code>函数是 IE 特有的，IE8 以下浏览器可以使用，可添加多个事件处理函数，只支持冒泡阶段</li></ul></li></ul> <p><strong>兼容各个浏览器的事件绑定和解除：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 事件绑定</span>
<span class="token keyword">function</span> <span class="token function">addEvent</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果支持addEventListener</span>
		element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果支持attachEvent</span>
		element<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token operator">+</span>type<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将this指向当前DOM对象</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 否则使用兼容的onclick绑定</span>
		element<span class="token punctuation">[</span><span class="token string">'on'</span><span class="token operator">+</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> handler<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 事件解绑</span>
<span class="token keyword">function</span> <span class="token function">removeEvent</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		element<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		element<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token operator">+</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		element<span class="token punctuation">[</span><span class="token string">'on'</span><span class="token operator">+</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>这两种绑定方式可以给DOM对象绑定多个事件处理程序</strong></p> <p>当遇到给多个元素或者给动态生成的元素绑定操作时，可以采用 <strong>事件委托（事件代理）</strong> 的方式绑定在父节点上。</p> <p>事件委托原理是事件冒泡，有这样一个结构<code>ul&gt;li</code>比如给 li 加一个 click 点击事件，那么这个事件就会一层一层的向外冒泡，执行顺序先 li 再 ul。如果我们给外面的 ul 绑定点击事件，那么里面 li 触发点击事件的时候，都会冒泡到外层的 ul 上，触发 ul 上的事件操作程序。这就是事件委托，委托它们父级代为执行事件。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>适合用事件委托的事件：
	click, mousedown, mouseup, keydown, keyup, keypress。
	
本身没有冒泡的特性，不能使用事件委托的事件：
	focus, blur
</code></pre></div><h3 id="_3-有哪些跨域的解决方案？"><a href="#_3-有哪些跨域的解决方案？" class="header-anchor">#</a> 3. 有哪些跨域的解决方案？</h3> <p>因为浏览器出于安全考虑，有同源策略。也就是说如果协议、域名或者端口有一个不同就是跨域，Ajax 请求会失败。</p> <p><strong>跨域方式</strong></p> <ul><li><p><strong>JSONP</strong></p> <p>原理：Web 页面上调用 js 文件不受跨域影响，凡是具有 src 属性标签都不受同源策略的影响，正是这个特性，我们把资源放到 script 标签里的 src 里面，把数据放到服务器上，并且是 json 格式（js 很容易操作 json）。script 标签中 src 属性的格式是 'url+参数'，比如 url?cd=doJSON，cd 是我们和后台协商好的类似形参的东西，是一个留给我们写处理函数接口，doJSON 就是我们事先定义好的函数，也就是回调函数，所有数据会以参数的形式传递给该函数（json 是一种数据格式，jsonp 是一种约定俗成的非正式传输协议）。</p> <p>JSONP 使用简单且兼容老版本浏览器，但是只限于 GET 请求。</p></li> <li><p><strong>CORS</strong></p> <p>原理：需要浏览器和后端同时支持。要在服务器端的 response header 里面加一个 Access-Control-Allow-Origin：指定域名（表示所有域名都可以跨域），浏览器端便可以发起 post 的跨域请求。浏览器会自动进行 CORS 通信，实现 CORS 通信的关键是后端，只要后端实现了 CORS，就实现了跨域。</p> <p>IE8 和 9 需要通过 XDomainRequest 来实现。它实现了 CORS 的部分规范，只支持 GET/POST 形式的请求。在服务器端，依旧要求在响应报头添加 &quot;Access-Control-Allow-Methods&quot; 标签（这点跟 CORS 一致）。创建一个 XDomainRequest 的实例，调用 open() 方法，再调用 send() 方法，请求返回之后，会触发 load 事件，相应的数据也会保存在 responseText 属性中</p></li> <li><p><strong>Document.domain</strong></p> <p>该方式只能用于二级域名相同的情况下，比如 a.test.com 和 b.test.com 适用于该方式。只需要给页面添加 document.domain='test.com' 表示二级域名都相同就可以实现跨域。</p> <p>一个网页被攻击，另外一个站点就会引起安全漏洞。</p></li> <li><p><strong>postMessage</strong></p> <p>h5 中有一种功能就是跨文档消息传输</p> <p><code>getMessageHTML.postMessage(message, targetOrigin)</code></p> <p>getMessageHTML 是接受信息的页面引用，可以是 iframe 的 contentWindow，window.open 的返回值 targetOrigin 是用于限制 getMessageHTML 的，填*的时候不做限制</p></li> <li><p><strong>服务器代理</strong></p> <p>服务器不受同源策略的影响，把所有资源放在服务器上，然后让服务器上的网页获取这些资源</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 发送消息端</span>
window<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token string">'http://test.com'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 接收消息端</span>
<span class="token keyword">var</span> mc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mc<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> origin <span class="token operator">=</span> event<span class="token punctuation">.</span>origin <span class="token operator">||</span> event<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>origin<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>origin <span class="token operator">===</span> <span class="token string">'http://test.com'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'验证通过'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><strong>Iframe</strong></p> <p><code>iframe+location.hash:</code></p> <p>利用 location.hash 来传值，改变 hash 不会刷新页面</p> <p><strong>缺点：</strong> 数据直接暴露在 url 中，数据长度和类型都有限制</p> <p><code>iframe+window.name:</code></p> <p>和 location.hash 方法差不多，主页面有一个 iframe，通过修改引入的子页面（同源）来获取 window.name 值来达到跨域。</p> <p><strong>缺点：</strong> 需要借助同源其他子页面</p></li></ul> <h3 id="_4-settimeout-function-0-先执行括号里面的函数还是先执行外部代码？"><a href="#_4-settimeout-function-0-先执行括号里面的函数还是先执行外部代码？" class="header-anchor">#</a> 4. setTimeout(function(){}, 0) 先执行括号里面的函数还是先执行外部代码？</h3> <p>JS 是门非阻塞单线程语言，因为在最初 JS 就是为了和浏览器交互而诞生的。如果 JS 是门多线程的语言，我们在多个线程中处理 DOM 就可能会发生问题（一个线程中新加节点，另一个线程中删除节点），当然可以引入读写锁解决这个问题。</p> <p>JS 在执行的过程中会产生执行环境，这些执行环境会被顺序的加入到执行栈中。如果遇到异步的代码，会被挂起并加入到 Task（有多种 task）队列中。一旦执行栈为空，Event Loop 就会从 Task 队列中拿出需要执行的代码并放入执行栈中执行，所以本质上来说 JS 中的异步还是同步行为。虽然 setTimeout 延时为 0，其实还是异步。这是因为 HTML5 标准规定这个函数第二个参数不得小于 4 毫秒，不足会自动增加。</p> <h3 id="_5-比如做个新闻编辑上传功能，有网络的情况下直接提交，没有网络的情况下可以离线保存。如何实现这个功能？"><a href="#_5-比如做个新闻编辑上传功能，有网络的情况下直接提交，没有网络的情况下可以离线保存。如何实现这个功能？" class="header-anchor">#</a> 5. 比如做个新闻编辑上传功能，有网络的情况下直接提交，没有网络的情况下可以离线保存。如何实现这个功能？</h3> <p>（想要把这道题答好，答案两步。<strong>数据交互，离线缓存</strong>）</p> <ul><li><p><strong>数据交互</strong> 利用 ajax 实现数据交互即可</p></li> <li><p><strong>离线缓存</strong></p> <p>cookie，localStorage，sessionStorage 都可以用于离线缓存数据，那么选择一个合适的来使用就尤为重要了！下面是它们的区别：</p> <p>从上表可以看到，cookie 已经不建议用于存储。如果没有大量数据存储需求的话，可以使用 localStorage 和 sessionStorage。对于不怎么改变的数据尽量使用 localStorage 存储，否则可以用 sessionStorage 存储。所以此处可以采用 localStorage 进行存储。</p></li></ul> <h2 id="四、前端框架"><a href="#四、前端框架" class="header-anchor">#</a> 四、前端框架</h2> <h3 id="_1-请简述一下-mvvm-框架是什么？它和-jquery-的区别是什么？"><a href="#_1-请简述一下-mvvm-框架是什么？它和-jquery-的区别是什么？" class="header-anchor">#</a> 1. 请简述一下 MVVM 框架是什么？它和 jQuery 的区别是什么？</h3> <p>MVVM 是 Model-View-ViewModel 的简写。</p> <p>MVVM 是 Web 前端一种非常流行的开发模式，利用 MVVM 可以使我们的代码更专注于处理业务逻辑而不是像 jQuery 去关心 DOM 操作。目前著名的 MVVM 框架有 vue，angular 等，这些框架各有千秋，但是实现的思想大致上是相同：数据绑定 + 视图刷新。跟 MVC 一样，主要目的是分离视图（View）和模型（Model）。View 可以独立于 Model 变化和修改，一个 ViewModel 可以绑定到不同的 &quot;View&quot; 上，当 View 变化的时候 Model 可以不变，当 Model 变化的时候 View 也可以不变。在 MVVM 中，数据是核心，由于 ViewModel 与 View 之间的双向绑定，操作了 ViewModel 中的数据（当然只能是监控属性），就会同步到 DOM，我们透过 DOM 事件监控用户对 DOM 的改动，也会同步到 ViewModel。</p> <h3 id="_2-你了解前端路由是如何实现的吗？"><a href="#_2-你了解前端路由是如何实现的吗？" class="header-anchor">#</a> 2. 你了解前端路由是如何实现的吗？</h3> <p>前端路由本质就是监听 URL 的变化，然后匹配路由规则，显示相应的页面，并且无须刷新。目前单页面使用的路由就只有两种实现方式。</p> <ul><li><p>hash 模式</p> <p>hash 路由一个明显的标志是带有 #，我们主要是通过监听 url 中的 hash 变化来进行路由跳转。</p> <p>hash 的优势就是兼容性更好，在老版 IE 中都有运行，问题在于 url 中一直存在 # 不够美观，而且 hash 路由更像是 Hack 而非标准。实现代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Routers</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>routes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>refresh <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refresh<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refresh<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">route</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> callback <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'/'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentUrl<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>history 模式</p> <p>History API 的出现使得我们的路由更加便捷美观。我们可以直接使用 History API 的方法和属性。代码实现如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Routers</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>routes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_bindPopState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token operator">:</span> path<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">route</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> callback <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">go</span><span class="token punctuation">(</span><span class="token parameter">psth</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token operator">:</span> path<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">_bindPopState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'popstate'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> path <span class="token operator">=</span> e<span class="token punctuation">.</span>state <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>state<span class="token punctuation">.</span>path<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="_3-什么是虚拟-dom，解决了什么问题？"><a href="#_3-什么是虚拟-dom，解决了什么问题？" class="header-anchor">#</a> 3. 什么是虚拟 DOM，解决了什么问题？</h3> <p>在浏览器渲染网页的过程中，加载到 HTML 文档后，会将文档解析并构建 DOM 树，然后将其与解析 CSS 生成的 CSSOM 树一起结合产生 RenderObject 树，然后将 RenderObject 树渲染成页面（当然中间可能会有一些优化，比如 RenderLayer 树）。这些过程都存在于渲染引擎之中，渲染引擎在浏览器中是与 JavaScript 引擎（JavaScriptCore 也好 V8 也好）分离开的，但为了方便 JS 操作 DOM 结构渲染引擎会暴露一些接口供 JavaScript 调用。由于这两块相互分离，通信是需要付出代价的，因此 JavaScript 调用 DOM 提供的接口性能不咋地。各种性能优化的最佳实践也都在尽可能的减少 DOM 操作次数。</p> <p>而虚拟 DOM 干了什么？它直接用 JavaScript 实现了 DOM 树（大致上）。组件的 HTML 结构并不会直接生成 DOM，而是映射生成虚拟的 JavaScript DOM 结构，又通过在这个虚拟 DOM 上实现了一个 diff 算法找出最小变更，再把这些变更写入实际的 DOM 中。这个虚拟 DOM 以 JS 结构的形式存在，计算性能会比较好，而且由于减少了实际 DOM 操作次数，性能会有较大提升。</p> <h3 id="_4-请详细说下你对-vue-生命周期的理解？"><a href="#_4-请详细说下你对-vue-生命周期的理解？" class="header-anchor">#</a> 4. 请详细说下你对 vue 生命周期的理解？</h3> <p>总共分为8个阶段：创建前/后，载入前/后，更新前/后，销毁前/后。</p> <p>创建前/后：在 beforeCreate 阶段，vue 实例的挂载元素 el 还没有。</p> <p>载入前/后：在 beforeMount 阶段，vue 实例的 $el 和 data 都初始化了，但还是挂载之前为虚拟的 dom节点，data.message 还未替换。在 mounted 阶段，vue 实例挂载完成，data.message 成功渲染。</p> <p>更新前/后：当 data 变化时，会触发 beforeUpdate 和 updated 方法。</p> <p>销毁前/后：在执行 destroy 方法后，对 data 的改变不会再触发周期函数，说明此时 vue 实例已经解除了事件监听以及和 dom 的绑定，但是 dom 结构依然存在。</p> <h3 id="_5-聊聊你对-vue-js-的-template-编译的理解？"><a href="#_5-聊聊你对-vue-js-的-template-编译的理解？" class="header-anchor">#</a> 5. 聊聊你对 Vue.js 的 template 编译的理解？</h3> <p>首先，通过 compile 编译器把 template 编译成 AST 语法树（abstract syntax tree 即源代码的抽象语法结构的树状表现形式），compile 是 createCompiler 的返回值，createCompiler 是用以创建编译器的。另外 compile 还负责合并 option。</p> <p>然后，AST 会经过 generate（将 AST 语法树转化成 render function 字符串的过程）得到 render 函数，render 的返回值是 VNode，VNode 是 Vue 的虚拟 DOM 节点，里面有（标签名、子节点、文本等等）。</p> <h3 id="_6-vue-组件-data-为什么必须是函数？"><a href="#_6-vue-组件-data-为什么必须是函数？" class="header-anchor">#</a> 6. Vue 组件 data 为什么必须是函数？</h3> <p>每个组件都是 <code>Vue</code> 的实例，组件共享 <code>data</code> 属性，当 <code>data</code> 的值是同一个引用类型的值时，改变其中一个会影响其他的</p> <h3 id="_7-route-和-router-的区别"><a href="#_7-route-和-router-的区别" class="header-anchor">#</a> 7. $route 和 $router 的区别</h3> <p><code>$route</code> 是“路由信息对象”，包括 <code>path</code>，<code>params</code>，<code>hash</code>，<code>query</code>，<code>fullPath</code>，<code>matched</code>，<code>name</code> 等路由信息参数。</p> <p>而 <code>$router</code> 是“路由实例”对象包括了路由的跳转方法，钩子函数等。</p> <h3 id="_8-描述一下-react-生命周期"><a href="#_8-描述一下-react-生命周期" class="header-anchor">#</a> 8. 描述一下 React 生命周期</h3> <p>整个 React 生命周期有3个阶段：创建、更新、卸载。</p> <ul><li><p>第一阶段</p> <p>这是虚拟 DOM 创建的阶段，会依次执行 5 个方法，这 5 个方法中除了 render 方法，其余四个方法在整个生命周期中只调用 1 次，而且一定会调用 1 次：</p> <p><code>getDefaultProps()</code></p> <p>这个方法在组件实例创建前，也就是构造函数执行前执行，获取父组件传来的参数，你可以在这里编辑参数并返回新的参数作为 props</p> <p><code>getInitalState()</code></p> <p>组件创建的一开始会调用这个方法初始化组件的 state</p> <p><code>componentWillMount()</code></p> <p>在组件 render 之前执行该方法，可用来修改 state。React 先调用父组件的这个函数，再调用子组件的这个函数</p> <p><code>render()</code></p> <p>开始组件渲染函数，返回一个只有一个根节点的虚拟 DOM。该函数中不能同步的修改组件的状态(state)。</p> <p><code>componentDidMount()</code></p> <p>在 render 渲染之后，通知组件已经加载完成。React 先调用子组件的这个函数，再调用父组件的这个函数。从这个函数开始，该组件就可以和其他框架交互了。比如设置计时器或者发起网络请求。</p></li> <li><p>第二阶段</p> <p>此时该组件已经进入了稳定运行阶段，这个阶段组件可以处理用户交互，或者接收事件更新界面。以下方法在整个生命周期中可以执行很多次，也可以一次也不执行。</p> <p><code>componentWillReceiveProps()</code></p> <p>当父容器中对应的参数改变将会调用子组件的该函数。新的 props 将会作为参数传递进来，老的 props 可以根据 this.props 来获取。我们可以在该函数中对 state 作一些处理。并且在该函数中更新 state 不会发生二次渲染</p> <p><code>shouldComponentUpdate()</code></p> <p>该函数传递过来两个参数，新的 state 和新的 props。state 和 props 的改变都会调到该函数。该函数主要对传递过来的 nextProps 和 nextState 作判断。如果返回 true 则重新渲染（默认都是返回 true），如果返回 false 则不重新渲染。在某些特定条件下，我们可以根据传递过来的 props 和 state 来选择更新或者不更新，从而提高效率。</p> <p><code>componentWillUpdate()</code></p> <p>与 componentWillMount 方法类似，在 render 渲染之前被调用。组件上会接收到新的 props 或者 state。这个函数调用之后，就会把 nextProps 和 nextState 分别设置到 this.props 和 this.state 中。</p> <p><code>componentDidUpdate()</code></p> <p>与 componentDidMount 方法类似，在 render 渲染之后被调用，真实 DOM 生成之后调用该函数。传递过来的参数是之前的 props 和 state。</p></li> <li><p>第三阶段</p> <p>这就是消亡的阶段，主要进行内存的清理和释放的工作。这个阶段只有一个方法，该方法在整个生命周期内调用且仅调用一次。</p> <p><code>componentWillUnmount()</code></p> <p>当组件要被从界面上移除的时候，就会调用 componentWillUnmount。在这里进行一些相关的销毁操作，比如撤销定时器，事件监听等等。</p></li></ul> <h3 id="_9-当组件的-setstate-函数被调用之后，发生了什么？"><a href="#_9-当组件的-setstate-函数被调用之后，发生了什么？" class="header-anchor">#</a> 9. 当组件的 setState 函数被调用之后，发生了什么？</h3> <p>React 会做的第一件事就是把你传递给 setState 的参数对象合并到组件原先的 state。这个事件会导致一个 “reconciliation”（调和）的过程。reconciliation 的最终目标就是，尽可能以最高效的方法，去基于新的 state 来更新 UI。为了达到这个目的，React 会构建一个 React 元素树（你可以把这个想象成一个表示 UI 的一个对象）。一旦这个树构建完毕，React 为了根据新的 state 去决定 UI 要怎么进行改变，它会找出这棵新树和旧树的不同之处。React 能够相对精确地找出哪些位置发生了改变以及如何发生了什么变化，并且知道如何只通过必要的更新来最小化重渲染。</p> <h2 id="五、性能"><a href="#五、性能" class="header-anchor">#</a> 五、性能</h2> <h3 id="_1-js-相关"><a href="#_1-js-相关" class="header-anchor">#</a> 1. JS 相关</h3> <ul><li>首先你需要了解 js 时间线，看完你就知道了为什么 js 要放到最下面加载</li> <li>懒执行。懒执行就是将某些逻辑延迟到使用时再计算。该技术可以用于首屏优化，对于某些耗时逻辑并不需要在首屏就使用的，就可以使用懒执行。懒执行需要唤醒，一般可以通过定时器或者事件的调用来唤醒。</li> <li>对 DOM 动画使用 CSS 类而不是 JavaScript</li> <li>使用快速 DOM 遍历 document.getElementById()</li> <li>指针引用存储到浏览器内对象中</li> <li>批量更改 DOM，尤其是在更新样式时</li> <li>在将 DOM 添加到页面之前单独构建 DOM</li> <li>在可滚动的 DIV 中使用缓冲的 DOM</li></ul> <h3 id="_2-渲染相关"><a href="#_2-渲染相关" class="header-anchor">#</a> 2. 渲染相关</h3> <ul><li>渲染过程优化</li></ul> <div class="language-markdown extra-class"><pre class="language-markdown"><code>首先了解一下渲染机制：

<span class="token code keyword">	1）处理 HTML 并构建 DOM 树</span>
	
<span class="token code keyword">	2）处理 CSS 构建 CSSOM 树</span>
	
<span class="token code keyword">	3）将 DOM 与 CSSOM 合并成一个渲染树</span>
	
<span class="token code keyword">	4）根据渲染树来布局，计算每个节点的位置</span>
	
<span class="token code keyword">	5）调用 GPU 绘制，合成图层，显示在屏幕上</span>
</code></pre></div><p>在构建 CSSOM 树时，会阻塞渲染，直至 CSSOM 树构建完成。并且构建 CSSOM 树是一个十分消耗性能的过程，所以应该尽量保证层级扁平，减少过度层叠，越是具体的 CSS 选择器，执行速度越慢。</p> <ul><li><p><strong>重排和重绘（回流）</strong></p> <p><strong>重绘：</strong> 和回流是渲染步骤中的一小节，但是这两个步骤对于性能影响很大。</p> <p>重绘是当节点需要更改外观而不会影响布局的，比如改变 color 就称为重绘</p> <p><strong>回流：</strong> 是布局或者几何属性需要改变称为回流。</p> <p>回流必定会发生重绘，重绘不一定会引发回流。回流所需的成本比重绘高的多，改变深层次的节点很可能导致父节点的一系列回流。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>下列情况会发生重排：

<span class="token code keyword">    1）页面初始渲染</span>
	
<span class="token code keyword">	2）添加/删除可见 DOM 元素</span>
	
<span class="token code keyword">	3）改变元素位置</span>
	
<span class="token code keyword">	4) 改变元素尺寸（宽、高、内外边距、边框等）</span>
	
<span class="token code keyword">	5）改变元素内容（文本或图片等）</span>
	
<span class="token code keyword">	6）改变窗口尺寸</span>
</code></pre></div><p>不同的条件下发生重排的范围及程度会不同，某些情况甚至会重排整个页面，比如 resize 或者 scroll。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>减少重排和重绘：

<span class="token code keyword">	1）使用 translate 替代 top</span>
	
<span class="token code keyword">	2）使用 visibility 替换 display: none，因为前者只会引起重绘，后者会引发回流（改变了布局）</span>
	
<span class="token code keyword">	3）把 DOM 离线后修改，比如：先把 DOM 给 display: none（有一次 Reflow），然后你修改100次，然后再把它显示出来</span>
	
<span class="token code keyword">	4）不要把 DOM 节点的属性值放在一个循环里当成循环里的变量</span>
	
<span class="token code keyword">	5）不要使用 table 布局，可能很小的一个小改动会造成整个 table 的重新布局</span>
	
<span class="token code keyword">	6）动画实现的速度的选择，动画速度越快，回流次数越多，也可以选择使用 requestAnimationFrame</span>
	
<span class="token code keyword">	7）CSS 选择符从右往左匹配查找，避免 DOM 深度过深</span>
</code></pre></div><p>将频繁运行的动画变为图层，图层能够阻止该节点回流影响别的元素。比如对于 video 标签，浏览器会自动将该节点变为图层。</p></li> <li><p><strong>图层</strong></p> <p>一般来说，可以把普通文档流看成一个图层。特定的属性可以生成一个新的图层。不同的图层渲染互不影响，所以对于某些频繁需要渲染的建议单独生成一个新图层，提高性能。但也不能生成过多的图层，会引起反作用。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>通过以下几个常用属性可以生成新图层：

<span class="token code keyword">	1）3D 变换：translate3d、translateZ</span>
	
<span class="token code keyword">	2）will-change</span>
	
<span class="token code keyword">	3）video、iframe 标签</span>
	
<span class="token code keyword">	4）通过动画实现的 opacity 动画转换</span>
	
<span class="token code keyword">	5）position: fixed</span>
</code></pre></div></li> <li><p><strong>懒加载</strong></p></li></ul> <p>懒加载就是将不关键的资源延后加载，原理就是只加载自定义区域（通常是可视区域，但也可以是即将进入可视区域）内需要加载的东西。对于图片来说，先设置图片标签的 src 属性为一张点位图，将真实的图片资源放入一个自定义属性中，当进入自定义区域时，就将自定义属性替换为 src 属性，这样图片就会去下载资源，实现了图片懒加载。</p> <p>懒加载不仅可以用于图片，也可以使用在别的资源上。比如进入可视区域才开始播放视频等等。</p> <h3 id="_3-文件优化"><a href="#_3-文件优化" class="header-anchor">#</a> 3. 文件优化</h3> <ul><li><p><strong>图片优化</strong></p> <p>1）计算图片大小</p> <p>对于一张 100 * 100 像素的图片来说，图像上有 10000 个像素点，如果每个像素的值是 RGBA 存储的话，那么也就是说每个像素有 4 个通道，每个通道 1 个字节（8 位 = 1 个字节），所以该图片大小大概为 39KB（10000 * 1 * 4 / 1024）。</p> <p>但是在实际项目中，一张图片可能并不需要使用那么多颜色去显示，我们可以通过减少每个像素的调色板来相应缩小图片的大小。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>了解了如何计算图片大小的知识，那么对于如何优化图片，想必大家已经有 2 个思路了：

<span class="token code keyword">	a. 减少像素点</span>
	
<span class="token code keyword">	b. 减少每个像素点能够显示的颜色</span>
</code></pre></div><p>2）图片加载优化</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>不用图片。很多时候会使用到很多修饰类图片，其实这类修饰图片完全可以用 CSS 去代替。

<span class="token code keyword">	b. 对于移动端来说，屏幕宽度就那么点，完全没有必要去加载原图浪费带宽。
		一般图片都用 CDN 加载，可以计算出适配屏幕的宽度，然后去请求相应裁剪好的图片。
		
	c. 小图使用 base64 格式</span>
	
<span class="token code keyword">	d. 将多个图标文件整合到一张图片中（雪碧图）</span>
	
<span class="token code keyword">	e. 选择正确的图片格式：
		对于能够显示 WebP 格式的浏览器尽量使用 WebP 格式。
		因为 WebP 格式具有更好的图像数据压缩算法，能带来更小的图片体积，而且拥有肉眼识别无差异的图像质量，缺点就是兼容性并不好；
		小图使用 PNG，其实对于大部分图标这类图片，完全可以使用 SVG 代替；
		照片使用 JPEG；</span>
</code></pre></div></li> <li><p><strong>其它文件优化</strong></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>	1）CSS 文件放在 head 中
	
<span class="token code keyword">	2）服务端开启文件压缩功能</span>
	
<span class="token code keyword">	3）将 script 标签放在 body 底部，因为 JS 文件执行会阻塞渲染。当然也可以把 script 标签放在任意位置然后加上 defer，表示该文件会并行下载，但是会放到 HTML 解析完成后顺序执行。对于没有任何依赖的 JS 文件可以加上 async，表示加载和渲染后续文档元素的过程将和 JS 文件的加载与执行并行无序进行。</span>
	
<span class="token code keyword">	4）执行 JS 代码过长会卡住渲染，对于需要很多时间计算的代码可以考虑使用 Webworker。Webworker 可以让我们另开一个线程执行脚本而不影响渲染。</span>
</code></pre></div></li> <li><p><strong>CDN</strong></p> <p>静态资源尽量使用 CDN 加载，由于浏览器对于单个域名有并发请求上限，可以考虑使用多个 CDN 域名。对于 CDN 加载静态资源需要注意 CDN 域名要与主站不同，否则每次请求都会带上主站的 Cookie。</p></li></ul> <h3 id="_4-网络相关"><a href="#_4-网络相关" class="header-anchor">#</a> 4. 网络相关</h3> <ul><li><p><strong>缓存</strong></p> <p>缓存对于前端性能优化来说是个很重要的点，良好的缓存策略可以降低资源的重复加载提高网页的整体加载速度。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>1）实现强缓存可以通过两种响应头实现：Expires 和 Cache-Control

2）如果缓存过期了，我们就可以使用 Last-Modified 和 If-Modified-Since、Etag 和 If-None-Match 来解决问题。如果缓存有效会返回 304。同样也需要客户端和服务器共同实现。

3）选择合适的缓存策略
对于大部分的场景都可以使用强缓存配合协商缓存解决，但是在一些特殊的地方可能需要选择特殊的缓存策略

<span class="token code keyword">	a. 对于某些不需要缓存的资源，可以使用 Cache-Control: no-store 并配合 Etag 使用，表示该资源不需要缓存</span>
	
<span class="token code keyword">	b. 对于频繁变动的资源，可以使用 Cache-Control: no-cache 并配合 Etag 使用，表示该资源已被缓存，但是每次都会发送请求询问资源是否更新。</span>
	
<span class="token code keyword">	c. 对于代码文件来说，通常使用 Cache-Control: max-age=31536000 并配合策略缓存使用，然后对文件进行指纹处理，一旦文件名变动就会立刻下载新的文件。</span>
</code></pre></div></li> <li><p><strong>使用HTTP/2.0</strong></p> <p>因为浏览器会有并发请求限制，在 HTTP / 1.1 时代，每个请求都需要建立和断开，消耗了好几个 RTT 时间，并且由于 TCP 慢启动的原因，加载体积大的文件会需要更多的时间。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>在 HTTP / 2.0 中引入了多路复用，能够让多个请求使用同一个 TCP 链接，极大的加快了网页的加载速度。并且还支持 Header 压缩，进一步的减少了请求的数据大小。

</code></pre></div></li> <li><p><strong>预加载</strong></p> <p>开发中，可能会遇到这样的情况。有些资源不需要马上用到，但是希望尽早获取，这时候就可以使用预加载。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.aaa.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>预加载其实是声明式的 fetch，强制浏览器请求资源，并且不会阻塞 onload 事件，可以使用以下代码开启预加载。</p></li> <li><p><strong>预渲染</strong></p> <p>以通过预渲染将下载的文件预先在后台渲染，可以使用以下代码开启预渲染</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>prerender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.aaa.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>预渲染虽然可以提高页面的加载速度，但是要确保该页面百分百会被用户在之后打开，否则就白白浪费资源去渲染。</p></li></ul> <h3 id="_5-构建工具"><a href="#_5-构建工具" class="header-anchor">#</a> 5. 构建工具</h3> <p>用 webpack 优化项目</p> <ul><li>对于 Webpack4，打包项目使用 production 模式，这样会自动开启代码压缩</li> <li>使用 ES6 模块来开启 tree  shaking，这个技术可以移除没有使用的代码</li> <li>优化图片，对于小图可以使用 base64 的方式写入文件中</li> <li>按照路由拆分代码，实现按需加载</li> <li>给打包出来的文件名添加哈希，实现浏览器缓存文件</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">2020-3-15 20:01:06</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.274fc755.js" defer></script><script src="/blog/assets/js/2.0bdbf684.js" defer></script><script src="/blog/assets/js/15.c382f294.js" defer></script>
  </body>
</html>
